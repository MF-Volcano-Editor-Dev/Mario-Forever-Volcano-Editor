[gd_scene load_steps=14 format=3 uid="uid://cvh7xbvy0048b"]

[ext_resource type="Script" path="res://objects/entities/@scripts/simple_walking_body_2d.gd" id="1_fs73i"]
[ext_resource type="Texture2D" uid="uid://by3uk7jcvyall" path="res://objects/entities/enemies/goombas/textures/goomba.png" id="2_03pwk"]
[ext_resource type="PackedScene" uid="uid://8gn0wap4vbbr" path="res://objects/#components/attack/general/attack_receiver.tscn" id="2_usjf0"]
[ext_resource type="PackedScene" uid="uid://cf4pm4ojp7ld1" path="res://objects/#components/attack/by_enemy/enemy_touch_stomp.tscn" id="3_y42qx"]
[ext_resource type="PackedScene" uid="uid://cdbtpinf0ew4x" path="res://objects/#components/entities/instantiater/enemy_death.tscn" id="4_5ogk8"]
[ext_resource type="Script" path="res://objects/#scripts/nodes/public/visibility/class_on_screen_enabler_tool_2d.gd" id="4_oubgt"]
[ext_resource type="PackedScene" uid="uid://cotmjwtyq17o" path="res://objects/entities/enemies/#deaths/goomba_stomped.tscn" id="5_lh23m"]
[ext_resource type="PackedScene" uid="uid://db4suxs45luyf" path="res://objects/#components/data/add_scores.tscn" id="5_t24vi"]
[ext_resource type="PackedScene" uid="uid://dyaxohgodb3iw" path="res://objects/entities/enemies/#deaths/goomba_killed.tscn" id="6_e6seu"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vx6x6"]
size = Vector2(32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mmnau"]
atlas = ExtResource("2_03pwk")
region = Rect2(0, 0, 31, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7vgus"]
atlas = ExtResource("2_03pwk")
region = Rect2(31, 0, 31, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_rxyue"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mmnau")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7vgus")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Goomba" type="EntityBody2D"]
velocity = Vector2(50, 0)
global_velocity = Vector2(50, -2.18557e-06)
gravity_scale = 0.5
collision_layer = 4
collision_mask = 8
velocity = Vector2(50, 0)
script = ExtResource("1_fs73i")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
shape = SubResource("RectangleShape2D_vx6x6")

[node name="Area2D" type="Area2D" parent="."]
visible = false
collision_layer = 4
collision_mask = 37

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("RectangleShape2D_vx6x6")

[node name="AttackReceiver" parent="Area2D" instance=ExtResource("2_usjf0")]
ignored_attacker_sources = Array[StringName]([&"enemy"])
metadata/_edit_pinned_properties_ = [&"ignored_attacker_sources"]

[node name="EnemyTouchStomp" parent="Area2D" instance=ExtResource("3_y42qx")]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_rxyue")
autoplay = "default"

[node name="EnemyDeath" parent="." instance=ExtResource("4_5ogk8")]
death_stomped = ExtResource("5_lh23m")
death_killed = ExtResource("6_e6seu")
metadata/_edit_pinned_properties_ = [&"death_stomped"]

[node name="AddScores" parent="." instance=ExtResource("5_t24vi")]
scores = 100
metadata/_edit_pinned_properties_ = [&"scores"]

[node name="OnScreenEnablerTool2D" type="VisibleOnScreenEnabler2D" parent="."]
rect = Rect2(0, 0, 0, 0)
script = ExtResource("4_oubgt")

[connection signal="collided_wall" from="." to="." method="turn_wall"]
[connection signal="attack_received" from="Area2D/AttackReceiver" to="EnemyDeath" method="killed_to_death" unbinds=1]
[connection signal="stomped" from="Area2D/EnemyTouchStomp" to="EnemyDeath" method="stomped_to_death"]
[connection signal="death_killed_created" from="EnemyDeath" to="." method="queue_free"]
[connection signal="death_killed_created" from="EnemyDeath" to="AddScores" method="add_scores"]
[connection signal="death_stomped_created" from="EnemyDeath" to="." method="queue_free"]
[connection signal="death_stomped_created" from="EnemyDeath" to="AddScores" method="add_scores"]
